<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>K's Tawa - Online Delivery</title>
  <style>
    :root { --primary-color: #d35400; --accent-color: #ff9800; --green-color: #27ae60; --red-color: #e74c3c; --background-color: #ffffff; --text-color: #333; }
    html { scroll-behavior: smooth; }
    body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif; margin: 0; background: var(--background-color); color: var(--text-color); padding-top: 130px; padding-bottom: 90px; }
    @keyframes flash-discount { 0%, 100% { background-color: var(--green-color); transform: scale(1); } 50% { background-color: #2ecc71; transform: scale(1.03); } }
    @keyframes slideUp { from { transform: translateY(100%); } to { transform: translateY(0); } }
    header { background: var(--primary-color); color: white; text-align: center; position: fixed; top: 0; width: 100%; box-sizing: border-box; z-index: 1000; padding: 10px 15px; box-shadow: 0 2px 8px rgba(0,0,0,0.2); display: flex; justify-content: center; align-items: center; height: 71px; }
    .header-logo { max-height: 50px; width: auto; }
    .header-logo + h1 { margin: 0 0 0 15px; font-size: 1.2em; }
    .category-nav { background: var(--primary-color); position: fixed; top: 71px; width: 100%; box-shadow: 0 2px 5px rgba(0,0,0,0.15); white-space: nowrap; overflow-x: auto; -webkit-overflow-scrolling: touch; z-index: 999; }
    .category-nav a { display: inline-block; padding: 15px; color: white; text-decoration: none; font-weight: 600; font-size: 0.9em; }
    .menu-container { padding: 75px 15px 15px; }
    section { padding-top: 20px; }
    .main-category-title { font-size: 2em; color: var(--primary-color); border-bottom: 4px solid var(--primary-color); padding-bottom: 10px; margin-bottom: 25px; }
    .sub-category-title { font-size: 1.4em; background-color: #f9f9f9; padding: 10px 15px; margin-top: 30px; margin-bottom: 15px; border-left: 5px solid var(--accent-color); border-radius: 6px; }
    .item { display: flex; justify-content: space-between; align-items: center; padding: 18px 5px; border-bottom: 1px solid #e0e0e0; }
    .item-info { flex-grow: 1; padding-right: 15px; }
    .item-name { font-weight: 600; font-size: 1.1em; color: var(--text-color); }
    .item-price { font-size: 0.9em; color: #666; margin-top: 4px; }
    .add-item-btn-wrapper { width: 100px; text-align: center; }
    .add-btn { background: #fff; color: var(--green-color); border: 2px solid var(--green-color); padding: 8px 25px; border-radius: 8px; font-weight: bold; cursor: pointer; }
    .quantity-control { display: flex; align-items: center; justify-content: space-between; border: 2px solid var(--green-color); border-radius: 8px; width: 100px; }
    .quantity-control button { background: none; border: none; color: var(--green-color); font-size: 1.5em; font-weight: bold; cursor: pointer; padding: 5px 12px; }
    .discount-banner { display: none; background: var(--green-color); color: white; text-align: center; padding: 8px; font-weight: bold; animation: flash-discount 2s infinite; margin-bottom: 20px; border-radius: 8px;}
    footer { position: fixed; bottom: 0; width: 100%; background: white; padding: 10px; box-shadow: 0 -2px 10px rgba(0,0,0,0.1); text-align: center;}
    .footer-cart-btn { display: none; width: 95%; max-width: 450px; margin: 0 auto; padding: 16px; font-size: 1.2em; color: white; border: none; border-radius: 10px; cursor: pointer; font-weight: bold; background-color: var(--green-color); }
    #optionsModal, #checkoutModal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 1001; background: rgba(0,0,0,0.6); justify-content: center; align-items: center; }
    .modal-dialog { position: absolute; bottom: 0; left: 0; width: 100%; background: #fff; border-radius: 20px 20px 0 0; box-sizing: border-box; max-height: 85vh; display: flex; flex-direction: column; animation: slideUp 0.3s ease-out; }
    .checkout-modal-content { background: white; padding: 25px; border-radius: 12px; width: 90%; max-width: 400px; }
    .checkout-modal-content h2 { margin-top: 0; }
    .checkout-modal-content ul { list-style-type: none; padding: 10px 0; max-height: 150px; overflow-y: auto; }
    .price-summary { border-top: 1px solid #eee; margin-top: 15px; padding-top: 15px; }
    .price-line { display: flex; justify-content: space-between; margin-bottom: 8px; }
    .price-line.total { font-weight: bold; font-size: 1.2em; }
    .price-line .discount { color: var(--green-color); }
    .checkout-modal-content input, .checkout-modal-content textarea { width: 100%; box-sizing: border-box; margin-bottom: 15px; padding: 14px; border: 1px solid #ccc; border-radius: 8px; font-size: 1.1em;}
    .place-order-btn { background-color: var(--green-color); width: 100%; padding: 14px; border: none; border-radius: 8px; font-size: 1.1em; font-weight: bold; color: white; }
    .place-order-btn:disabled { background-color: #95a5a6; cursor: not-allowed; }
    .min-order-warning { color: var(--red-color); text-align: center; font-weight: bold; margin-top: 10px; }
  </style>
</head>
<body>

<header>
    <img src="https://lh3.googleusercontent.com/tHEXO53lDMWp5DAV2aD9PprhZVZm7zDNvOaQnUEw4t5CwN70xPdj0BozneN1Sa4alO1vQaZ4fv4J9vEOhkz_E7di-uMRPRa5qaTnOPmoGQ=w256-rw" alt="K's Tawa Logo" class="header-logo">
    <h1>K‚Äôs Tawa V/s Tandoor Junction</h1>
</header>
<nav class="category-nav">
  <a href="#cat-starters">Starters</a>
  <a href="#cat-platters">Platters & Combos</a>
  <a href="#cat-rolls">Rolls</a>
  <a href="#cat-main-course">Main Course</a>
  <a href="#cat-momos">Momos</a>
  <a href="#cat-breads-biryani">Breads & Biryani</a>
  <a href="#cat-chinese-pasta">Chinese & Pasta</a>
  <a href="#cat-drinks">Drinks</a>
</nav>

<div class="menu-container" id="menu-container"></div>

<footer><button id="footerCartBtn" class="footer-cart-btn" onclick="showCheckoutForm()">View Cart</button></footer>

<div id="checkoutModal">
  <div class="checkout-modal-content">
    <h2>Enter Delivery Details</h2>
    <input type="text" id="customerName" placeholder="Full Name" required />
    <input type="tel" id="customerPhone" placeholder="Phone Number" required />
    <textarea id="customerAddress" placeholder="Complete Address (House No, Street, Landmark)" rows="3" required></textarea>
    <h4>Order Summary:</h4>
    <ul id="cartItemsList"></ul>
    <div class="price-summary">
        <div class="price-line"><span>Subtotal</span><span id="subtotalPrice">‚Çπ0.00</span></div>
        <div class="price-line discount"><span>Discount (20%)</span><span id="discountAmount">- ‚Çπ0.00</span></div>
        <hr><div class="price-line total"><span>To Pay</span><span id="checkoutTotal">‚Çπ0.00</span></div>
    </div>
    <div id="minOrderWarning" class="min-order-warning" style="display: none;"></div>
    <div><button onclick="submitOrder()" id="submitBtn" class="place-order-btn">Place Order</button></div>
  </div>
</div>

<div id="optionsModal">
  <div class="modal-dialog">
    <div class="modal-header"><h2 id="modalItemName"></h2></div>
    <div class="modal-body" id="modalBody"></div>
    <div class="modal-footer">
      <button id="modalAddItemBtn" class="modal-add-btn">Add item - ‚Çπ0</button>
    </div>
  </div>
</div>

<script>
    const MINIMUM_ORDER_VALUE = 299;
    const DISCOUNT_PERCENTAGE = 0.20;
    const menuData = {
        "cat-starters": {
            title: "Chef's Specials Tandoori Starters",
            subCategories: {
                "veg-starters": {
                    title: "üî• Tandoori Starters (Veg)",
                    items: [
                        { id: "achari-chaap", name: "Achari Chaap", price: 110, options: [{ group: "Size", type: "radio", required: true, choices: [{ name: "Half", price: 110 }, { name: "Full", price: 180 }] }] },
                        { id: "lemon-chaap", name: "Lemon Chaap", price: 110, options: [{ group: "Size", type: "radio", required: true, choices: [{ name: "Half", price: 110 }, { name: "Full", price: 180 }] }] },
                        { id: "chatpati-chaap", name: "Chatpati Chaap", price: 110, options: [{ group: "Size", type: "radio", required: true, choices: [{ name: "Half", price: 110 }, { name: "Full", price: 180 }] }] },
                        { id: "malai-chaap", name: "Malai Chaap", price: 110, options: [{ group: "Size", type: "radio", required: true, choices: [{ name: "Half", price: 110 }, { name: "Full", price: 180 }] }] },
                        { id: "paneer-tikka", name: "Paneer Tikka", price: 120, options: [{ group: "Size", type: "radio", required: true, choices: [{ name: "Half", price: 120 }, { name: "Full", price: 200 }] }] },
                        { id: "paneer-malai-tikka", name: "Paneer Malai Tikka", price: 140, options: [{ group: "Size", type: "radio", required: true, choices: [{ name: "Half", price: 140 }, { name: "Full", price: 240 }] }] },
                        { id: "paneer-achari-tikka", name: "Paneer Achari Tikka", price: 120, options: [{ group: "Size", type: "radio", required: true, choices: [{ name: "Half", price: 120 }, { name: "Full", price: 200 }] }] },
                        { id: "peri-peri-soya-chaap", name: "Peri Peri Soya Chaap", price: 110, options: [{ group: "Size", type: "radio", required: true, choices: [{ name: "Half", price: 110 }, { name: "Full", price: 180 }] }] },
                        { id: "peri-peri-paneer-tikka", name: "Peri Peri Paneer Tikka", price: 120, options: [{ group: "Size", type: "radio", required: true, choices: [{ name: "Half", price: 120 }, { name: "Full", price: 200 }] }] },
                        { id: "mushroom-tikka", name: "Mushroom Tikka", price: 120, options: [{ group: "Size", type: "radio", required: true, choices: [{ name: "Half", price: 120 }, { name: "Full", price: 200 }] }] },
                        { id: "afghani-tandoori-chaap", name: "Afghani Tandoori Chaap", price: 140, options: [{ group: "Size", type: "radio", required: true, choices: [{ name: "Half", price: 140 }, { name: "Full", price: 220 }] }] }
                    ]
                },
                "non-veg-starters": {
                    title: "üî• Tandoori Starters (Non-Veg)",
                    items: [
                        { id: "bhatti-murg", name: "Bhatti Murg", price: 260, options: [{ group: "Size", type: "radio", required: true, choices: [{ name: "4 pcs", price: 260 }, { name: "8 pcs", price: 480 }] }] },
                        { id: "tandoori-chicken", name: "Tandoori Chicken", price: 260, options: [{ group: "Size", type: "radio", required: true, choices: [{ name: "4 pcs", price: 260 }, { name: "8 pcs", price: 480 }] }] },
                        { id: "chicken-tikka", name: "Chicken Tikka (8 pcs)", price: 300 },
                        { id: "chicken-seekh", name: "Chicken Seekh (2 pcs)", price: 180 }
                    ]
                }
            }
        },
        "cat-platters": {
            title: "Platters & Meal Combos",
            items: [
                { id: "tandoori-veg-platter", name: "Tandoori Veg Platters", price: 350 },
                { id: "malai-peri-combo", name: "Malai Chaap (Half) + Peri Peri Soya Chaap (Half)", price: 279 },
                { id: "lemon-chatpati-combo", name: "Lemon Chaap (Half) + Chatpati Chaap (Half)", price: 279 },
                { id: "afghani-achari-combo", name: "Afghani Tandoori Chaap (Half) + Achari Chaap (Half)", price: 279 }
            ]
        },
        "cat-rolls": {
            title: "Rocking Rolls",
            items: [
                { id: "chicken-seekh-roll", name: "Chicken Seekh Roll", price: 180 },
                { id: "chicken-tikka-roll", name: "Chicken Tikka Roll", price: 220 },
                { id: "malai-chaap-roll", name: "Malai Chaap Roll", price: 120, options: [{ group: "Size", type: "radio", required: true, choices: [{ name: "Half", price: 120 }, { name: "Full", price: 190 }] }] },
                { id: "chatpati-chaap-roll", name: "Chatpati Chaap Roll", price: 120, options: [{ group: "Size", type: "radio", required: true, choices: [{ name: "Half", price: 120 }, { name: "Full", price: 190 }] }] },
                { id: "achari-chaap-roll", name: "Achari Chaap Roll", price: 120, options: [{ group: "Size", type: "radio", required: true, choices: [{ name: "Half", price: 120 }, { name: "Full", price: 190 }] }] },
                { id: "afghani-chaap-roll", name: "Afghani Chaap Roll", price: 130, options: [{ group: "Size", type: "radio", required: true, choices: [{ name: "Half", price: 130 }, { name: "Full", price: 220 }] }] },
                { id: "lemon-chaap-roll", name: "Lemon Chaap Roll", price: 120, options: [{ group: "Size", type: "radio", required: true, choices: [{ name: "Half", price: 120 }, { name: "Full", price: 190 }] }] },
                { id: "mushroom-roll", name: "Mushroom Roll", price: 140, options: [{ group: "Size", type: "radio", required: true, choices: [{ name: "Half", price: 140 }, { name: "Full", price: 200 }] }] },
                { id: "paneer-tikka-roll", name: "Paneer Tikka Roll", price: 120, options: [{ group: "Size", type: "radio", required: true, choices: [{ name: "Half", price: 120 }, { name: "Full", price: 200 }] }] },
                { id: "peri-peri-soya-roll", name: "Peri Peri Soya Chaap Roll", price: 120, options: [{ group: "Size", type: "radio", required: true, choices: [{ name: "Half", price: 120 }, { name: "Full", price: 190 }] }] },
                { id: "peri-peri-paneer-roll", name: "Peri Peri Paneer Tikka Roll", price: 140, options: [{ group: "Size", type: "radio", required: true, choices: [{ name: "Half", price: 140 }, { name: "Full", price: 200 }] }] },
            ]
        },
        "cat-main-course": {
            title: "Main Course",
            subCategories: {
                "veg-main": {
                    title: "ü•ó Veg Main Course",
                    items: [
                        { id: "tawa-chaap-masala", name: "Tawa Chaap Masala", price: 160, options: [{ group: "Size", type: "radio", required: true, choices: [{ name: "Half", price: 160 }, { name: "Full", price: 230 }] }] },
                        { id: "tawa-mushroom-masala", name: "Tawa Mushroom Masala", price: 160, options: [{ group: "Size", type: "radio", required: true, choices: [{ name: "Half", price: 160 }, { name: "Full", price: 230 }] }] },
                        { id: "tawa-paneer-masala", name: "Tawa Paneer Masala", price: 160, options: [{ group: "Size", type: "radio", required: true, choices: [{ name: "Half", price: 160 }, { name: "Full", price: 230 }] }] },
                        { id: "paneer-takatak", name: "Paneer Takatak", price: 170, options: [{ group: "Size", type: "radio", required: true, choices: [{ name: "Half", price: 170 }, { name: "Full", price: 240 }] }] },
                        { id: "butter-chaap", name: "Butter Chaap", price: 170, options: [{ group: "Size", type: "radio", required: true, choices: [{ name: "Half", price: 170 }, { name: "Full", price: 240 }] }] },
                        { id: "shahi-paneer", name: "Shahi Paneer", price: 120, options: [{ group: "Size", type: "radio", required: true, choices: [{ name: "Half", price: 120 }, { name: "Full", price: 200 }] }] },
                        { id: "kadhai-chaap", name: "Kadhai Chaap", price: 120, options: [{ group: "Size", type: "radio", required: true, choices: [{ name: "Half", price: 120 }, { name: "Full", price: 210 }] }] },
                        { id: "mix-veg", name: "Mix Veg", price: 120, options: [{ group: "Size", type: "radio", required: true, choices: [{ name: "Half", price: 120 }, { name: "Full", price: 190 }] }] },
                        { id: "kadhai-paneer", name: "Kadhai Paneer", price: 120, options: [{ group: "Size", type: "radio", required: true, choices: [{ name: "Half", price: 120 }, { name: "Full", price: 200 }] }] },
                        { id: "paneer-butter-masala", name: "Paneer Butter Masala", price: 140, options: [{ group: "Size", type: "radio", required: true, choices: [{ name: "Half", price: 140 }, { name: "Full", price: 230 }] }] },
                        { id: "mushroom-do-pyaza", name: "Mushroom Do Pyaza", price: 240 },
                        { id: "matar-paneer", name: "Matar Paneer", price: 130, options: [{ group: "Size", type: "radio", required: true, choices: [{ name: "Half", price: 130 }, { name: "Full", price: 220 }] }] },
                        { id: "paneer-lababdar", name: "Paneer Lababdar", price: 160, options: [{ group: "Size", type: "radio", required: true, choices: [{ name: "Half", price: 160 }, { name: "Full", price: 250 }] }] },
                        { id: "tadka-dal-fry", name: "Tadka Dal Fry", price: 120, options: [{ group: "Size", type: "radio", required: true, choices: [{ name: "Half", price: 120 }, { name: "Full", price: 180 }] }] }
                    ]
                },
                "non-veg-main": {
                    title: "üçó Non-Veg Main Course",
                    items: [
                        { id: "chicken-utterly-butterly", name: "Chicken Utterly Butterly", price: 350, options: [{ group: "Size", type: "radio", required: true, choices: [{ name: "Half", price: 350 }, { name: "Full", price: 580 }] }] },
                        { id: "butter-chicken", name: "Butter Chicken", price: 220, options: [{ group: "Size", type: "radio", required: true, choices: [{ name: "Qtr", price: 220 }, { name: "Half", price: 390 }, { name: "Full", price: 650 }] }] },
                        { id: "boneless-butter-chicken", name: "Boneless Butter Chicken", price: 230, options: [{ group: "Size", type: "radio", required: true, choices: [{ name: "Qtr", price: 230 }, { name: "Half", price: 430 }, { name: "Full", price: 700 }] }] },
                        { id: "chicken-do-pyaza", name: "Chicken Do Pyaza", price: 390, options: [{ group: "Size", type: "radio", required: true, choices: [{ name: "Half", price: 390 }, { name: "Full", price: 650 }] }] },
                        { id: "kadai-chicken", name: "Kadai Chicken", price: 220, options: [{ group: "Size", type: "radio", required: true, choices: [{ name: "Qtr", price: 220 }, { name: "Half", price: 390 }, { name: "Full", price: 650 }] }] },
                        { id: "tawa-chicken", name: "Tawa Chicken", price: 220, options: [{ group: "Size", type: "radio", required: true, choices: [{ name: "Qtr", price: 220 }, { name: "Half", price: 420 }, { name: "Full", price: 660 }] }] },
                        { id: "ghar-jaisa-chicken", name: "Ghar Jaisa Chicken Curry", price: 220, options: [{ group: "Size", type: "radio", required: true, choices: [{ name: "Qtr", price: 220 }, { name: "Half", price: 370 }, { name: "Full", price: 630 }] }] },
                        { id: "chicken-rara-punjabi", name: "Chicken Rara Punjabi KS Special", price: 220, options: [{ group: "Size", type: "radio", required: true, choices: [{ name: "Qtr", price: 220 }, { name: "Half", price: 450 }, { name: "Full", price: 700 }] }] },
                        { id: "boti-chicken-masala", name: "Boti Chicken Masala", price: 390, options: [{ group: "Size", type: "radio", required: true, choices: [{ name: "Half", price: 390 }, { name: "Full", price: 650 }] }] },
                        { id: "chicken-malmal", name: "Chicken Malmal", price: 440, options: [{ group: "Size", type: "radio", required: true, choices: [{ name: "Half", price: 440 }, { name: "Full", price: 700 }] }] },
                        { id: "chicken-tikka-butter-masala", name: "Chicken Tikka Butter Masala", price: 420, options: [{ group: "Size", type: "radio", required: true, choices: [{ name: "Half", price: 420 }, { name: "Full", price: 720 }] }] },
                        { id: "egg-curry", name: "Egg Curry (4 pcs)", price: 250 },
                        { id: "chicken-seekh-masala", name: "Chicken Seekh Masala (500 ml)", price: 260 }
                    ]
                }
            }
        },
        "cat-momos": {
            title: "Momos",
            subCategories: {
                "paneer-momos": {
                    title: "ü•ü Paneer Momos (10 pcs)",
                    items: [
                        { id: "paneer-kurkure-momos", name: "Paneer Kurkure Momos", price: 140 },
                        { id: "paneer-steam-momos", name: "Paneer Steam Momos", price: 120 },
                        { id: "paneer-fried-momos", name: "Paneer Fried Momos", price: 140 },
                        { id: "paneer-afghani-momos", name: "Paneer Afghani Momos", price: 180 },
                        { id: "paneer-malai-momos", name: "Paneer Malai Momos", price: 180 },
                        { id: "paneer-gravy-momos", name: "Paneer Gravy Momos", price: 200 },
                        { id: "paneer-chilli-momos", name: "Paneer Chilli Momos", price: 220 }
                    ]
                },
                "veg-momos": {
                    title: "ü•ü Veg Momos (10 pcs)",
                    items: [
                        { id: "veg-kurkure-momos", name: "Veg Kurkure Momos", price: 110 },
                        { id: "veg-steam-momos", name: "Veg Steam Momos", price: 80 },
                        { id: "veg-tandoori-momos", name: "Veg Tandoori Momos", price: 100 },
                        { id: "veg-fried-momos", name: "Veg Fried Momos", price: 110 },
                        { id: "veg-afghani-momos", name: "Veg Afghani Momos", price: 120 },
                        { id: "veg-malai-momos", name: "Veg Malai Momos", price: 120 },
                        { id: "veg-gravy-momos", name: "Veg Gravy Momos", price: 130 },
                        { id: "veg-chilli-momos", name: "Veg Chilli Momos", price: 150 }
                    ]
                }
            }
        },
        "cat-breads-biryani": {
            title: "Breads, Biryani & Rice",
            subCategories: {
                "breads": {
                    title: "üçû Best Of Indian Breads",
                    items: [
                        { id: "tandoori-roti", name: "Tandoori Roti", price: 12 },
                        { id: "rumali-roti", name: "Rumali Roti", price: 10 },
                        { id: "butter-roti", name: "Butter Roti", price: 15 },
                        { id: "laccha-paratha", name: "Laccha Paratha", price: 25 },
                        { id: "plain-naan", name: "Plain Naan", price: 30 },
                        { id: "butter-naan", name: "Butter Naan", price: 40 },
                        { id: "onion-naan", name: "Onion Naan", price: 50 },
                        { id: "stuffed-naan", name: "Stuffed Naan", price: 60 },
                        { id: "garlic-naan", name: "Garlic Naan", price: 60 },
                        { id: "aloo-paratha", name: "Aloo Paratha", price: 50 },
                        { id: "chicken-keema-naan", name: "Chicken Keema Naan", price: 90 },
                        { id: "paneer-paratha", name: "Paneer Paratha", price: 70 },
                        { id: "missi-roti", name: "Missi Roti", price: 25 }
                    ]
                },
                "biryani": {
                    title: "üç≤ Dum Biryani",
                    items: [
                        { id: "hyderabadi-chicken-biryani", name: "Hyderabadi Chicken Dum Biryani", price: 249 },
                        { id: "chicken-seekh-biryani", name: "Chicken Seekh Dum Biryani", price: 249 },
                        { id: "kolkatta-chicken-biryani", name: "Kolkatta Chicken Dum Biryani", price: 299 },
                        { id: "hyderabadi-veg-biryani", name: "Hyderabadi Veg Dum Biryani", price: 149 },
                        { id: "paneer-tikka-biryani", name: "Paneer Tikka Dum Biryani", price: 199 },
                        { id: "egg-biryani", name: "Egg Dum Biryani", price: 199 },
                        { id: "mushroom-biryani", name: "Mushroom Dum Biryani", price: 199 },
                        { id: "soya-chaap-biryani", name: "Soya Chaap Dum Biryani", price: 190 }
                    ]
                },
                "rice": {
                    title: "üçö Rice",
                    items: [
                        { id: "egg-fried-rice", name: "Egg Fried Rice", price: 170 },
                        { id: "veg-fried-rice", name: "Veg Fried Rice", price: 140 },
                        { id: "jeera-rice", name: "Jeera Rice", price: 130 },
                        { id: "steam-rice", name: "Steam Rice", price: 120 },
                        { id: "veg-schezwan-rice", name: "Veg Schezwan Rice", price: 150 },
                        { id: "chicken-fried-rice", name: "Chicken Fried Rice", price: 220 },
                        { id: "chicken-schezwan-rice", name: "Chicken Schezwan Rice", price: 260 }
                    ]
                }
            }
        },
        "cat-chinese-pasta": {
            title: "Chinese, Noodles & Pasta",
            subCategories: {
                "noodles": {
                    title: "üçú Noodles",
                    items: [
                        { id: "chicken-noodles", name: "Chicken Noodles", price: 180 },
                        { id: "chicken-hakka-noodles", name: "Chicken Hakka Noodles", price: 200 },
                        { id: "chicken-schezwan-noodles", name: "Chicken Schezwan Noodles", price: 200 },
                        { id: "chicken-chilli-garlic-noodles", name: "Chicken Chilli Garlic Noodles", price: 200 },
                        { id: "chicken-singapori-noodles", name: "Chicken Singapori Noodles", price: 200 },
                        { id: "veg-noodles", name: "Veg Noodles", price: 120 },
                        { id: "veg-hakka-noodles", name: "Veg Hakka Noodles", price: 150 },
                        { id: "veg-schezwan-noodles", name: "Veg Schezwan Noodles", price: 150 },
                        { id: "chilli-garlic-noodles", name: "Chilli Garlic Noodles", price: 150 },
                        { id: "singapori-noodles", name: "Singapori Noodles", price: 150 },
                        { id: "paneer-noodles", name: "Paneer Noodles", price: 170 },
                        { id: "mushroom-noodles", name: "Mushroom Noodles", price: 170 },
                        { id: "egg-noodles", name: "Egg Noodles", price: 170 }
                    ]
                },
                "chinese-delights": {
                    title: "ü•¢ Chinese Delights",
                    items: [
                        { id: "chilli-chicken-dry", name: "Chilli Chicken Dry (10 pcs)", price: 250 },
                        { id: "chilli-chicken-gravy", name: "Chilli Chicken Gravy (10 pcs)", price: 250 },
                        { id: "chicken-manchurian-dry", name: "Chicken Manchurian Dry (10 pcs)", price: 250 },
                        { id: "chicken-manchurian-gravy", name: "Chicken Manchurian Gravy (10 pcs)", price: 250 },
                        { id: "veg-manchurian-dry", name: "Veg Manchurian Dry", price: 180 },
                        { id: "veg-manchurian-gravy", name: "Veg Manchurian Gravy", price: 200 },
                        { id: "crispy-chilli-honey-potato", name: "Crispy Chilli Honey Potato", price: 140 },
                        { id: "chilli-paneer-gravy", name: "Chilli Paneer Gravy", price: 220 },
                        { id: "chilli-paneer-dry", name: "Chilli Paneer (Dry)", price: 200 },
                        { id: "chilli-mushroom", name: "Chilli Mushroom", price: 190 },
                        { id: "french-fries", name: "French Fries", price: 100 },
                        { id: "chilli-gobi-dry", name: "Chilli Gobi Dry", price: 190 },
                        { id: "chilli-potato", name: "Chilli Potato", price: 130 }
                    ]
                },
                "pasta": {
                    title: "üçù Pasta K's Special",
                    items: [
                        { id: "mix-pasta", name: "Mix Pasta Mac & Cheese", price: 140 },
                        { id: "red-sauce-pasta", name: "Red Sauce Pasta Mac & Cheese", price: 140 },
                        { id: "white-sauce-pasta", name: "White Sauce Pasta Mac & Cheese", price: 140 },
                        { id: "chicken-mix-pasta", name: "Chicken Mix Pasta Mac & Cheese", price: 180 },
                        { id: "chicken-red-sauce-pasta", name: "Chicken Red Sauce Pasta Mac & Cheese", price: 180 },
                        { id: "chicken-white-sauce-pasta", name: "Chicken White Sauce Pasta Mac & Cheese", price: 180 }
                    ]
                }
            }
        },
        "cat-drinks": {
            title: "Soft Drinks",
            items: [
                { id: "coke-large", name: "Coke/Thums Up (Large)", price: 40 },
                { id: "coke-small", name: "Coke/Thums Up (Small)", price: 20 },
                { id: "water-big", name: "Water Big", price: 20 },
                { id: "water-small", name: "Water Small", price: 10 },
                { id: "arora-lemon", name: "Arora Lemon", price: 10 }
            ]
        }
    };
    
    let cart = [];
    let currentModalItem = {};

    function generateMenu() {
        const container = document.getElementById('menu-container');
        if (!container) return;
        container.innerHTML = '';
        for (const catId in menuData) {
            const category = menuData[catId];
            const section = document.createElement('section');
            section.id = catId;
            section.innerHTML = `<h2 class="main-category-title">${category.title}</h2>`;
            if (category.subCategories) {
                for (const subCatId in category.subCategories) {
                    const subCategory = category.subCategories[subCatId];
                    section.innerHTML += `<h3 class="sub-category-title">${subCategory.title}</h3>`;
                    subCategory.items.forEach(item => section.appendChild(createItemElement(item)));
                }
            } else {
                category.items.forEach(item => section.appendChild(createItemElement(item)));
            }
            container.appendChild(section);
        }
    }

    function createItemElement(item) {
        const itemDiv = document.createElement('div');
        itemDiv.className = 'item';
        itemDiv.id = `item-${item.id}`;
        const priceText = item.options ? `‚Çπ${item.price} onwards` : `‚Çπ${item.price}`;
        itemDiv.innerHTML = `<div class="item-info"><div class="item-name">${item.name}</div><div class="item-price">${priceText}</div></div><div class="add-item-btn-wrapper"></div>`;
        const wrapper = itemDiv.querySelector('.add-item-btn-wrapper');
        const addButton = document.createElement('button');
        addButton.className = 'add-btn';
        addButton.textContent = 'ADD';
        addButton.onclick = () => item.options ? showOptionsModal(item) : addItem(item.id, item.name, item.price);
        wrapper.appendChild(addButton);
        return itemDiv;
    }

    function showOptionsModal(item) {
        currentModalItem = item;
        document.getElementById('modalItemName').textContent = currentModalItem.name;
        const modalBody = document.getElementById('modalBody');
        modalBody.innerHTML = '';
        (item.options || []).forEach(group => {
            const groupDiv = document.createElement('div');
            groupDiv.className = 'option-group';
            const requiredTag = group.required ? '<span class="required-tag">REQUIRED</span>' : '';
            groupDiv.innerHTML = `<h3>${group.group}${requiredTag}</h3>`;
            group.choices.forEach((choice, index) => {
                const isChecked = group.type === 'radio' && index === 0 ? 'checked' : '';
                const choiceId = `${group.group.replace(/\s+/g, '-')}-${index}`;
                groupDiv.innerHTML += `<div class="option-choice"><label for="${choiceId}"><input type="${group.type}" id="${choiceId}" name="${group.group}" value="${choice.price}" data-name="${choice.name}" onchange="updateModalPrice()" ${isChecked}><span>${choice.name}</span></label><span>‚Çπ${choice.price}</span></div>`;
            });
            modalBody.appendChild(groupDiv);
        });
        updateModalPrice();
        document.getElementById('optionsModal').style.display = 'block';
    }

    function updateModalPrice() {
        let total = 0; let isRequiredMet = true;
        (currentModalItem.options || []).forEach(group => {
            if (group.required && !document.querySelector(`#modalBody input[name="${group.group}"]:checked`)) { isRequiredMet = false; }
        });
        document.querySelectorAll('#modalBody input:checked').forEach(input => { total += parseFloat(input.value); });
        const addButton = document.getElementById('modalAddItemBtn');
        addButton.textContent = `Add Item - ‚Çπ${total.toFixed(2)}`;
        addButton.disabled = !isRequiredMet;
    }
    
    document.getElementById('modalAddItemBtn').onclick = function() {
        let finalPrice = 0; let nameParts = [currentModalItem.name]; let idParts = [currentModalItem.id];
        document.querySelectorAll('#modalBody input:checked').forEach(input => {
            finalPrice += parseFloat(input.value);
            nameParts.push(`(${input.dataset.name})`);
            idParts.push(input.dataset.name.toLowerCase().replace(/\s+/g, '-'));
        });
        const finalName = nameParts.join(' ');
        const finalId = idParts.join('_');
        addItem(finalId, finalName, finalPrice);
        document.getElementById('optionsModal').style.display = 'none';
    };
    
    document.getElementById('optionsModal').onclick = function(event) { if (event.target.id === 'optionsModal') { event.target.style.display = 'none'; } };
    
    function addItem(id, name, price) {
        const existingItem = cart.find(item => item.id === id);
        if (existingItem) { existingItem.quantity++; } 
        else { cart.push({ id, name, price, quantity: 1, baseId: id.split('_')[0] }); }
        updateMainDisplay();
    }

    function removeItem(id) {
        const itemIndex = cart.findIndex(item => item.id === id);
        if (itemIndex > -1) {
            cart[itemIndex].quantity--;
            if (cart[itemIndex].quantity === 0) { cart.splice(itemIndex, 1); }
        }
        updateMainDisplay();
    }

    function updateMainDisplay() {
        const itemBaseIdCounts = cart.reduce((acc, item) => { acc[item.baseId] = (acc[item.baseId] || 0) + item.quantity; return acc; }, {});
        document.querySelectorAll('.add-item-btn-wrapper').forEach(wrapper => {
            const itemDiv = wrapper.closest('.item'); if(!itemDiv) return; const baseId = itemDiv.id.replace('item-', '');
            const totalQty = itemBaseIdCounts[baseId] || 0;
            if (totalQty > 0) { wrapper.innerHTML = `<div class="quantity-control"><button onclick="removeLastAddedItem('${baseId}')">-</button><span class="quantity">${totalQty}</span><button onclick="reopenOptionsFor('${baseId}')">+</button></div>`; } 
            else { const originalItem = findMenuItemById(baseId); wrapper.innerHTML = `<button class="add-btn">ADD</button>`; if(originalItem){ wrapper.querySelector('.add-btn').onclick = () => originalItem.options ? showOptionsModal(originalItem) : addItem(originalItem.id, originalItem.name, originalItem.price); } }
        });
        const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0); const totalPrice = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
        const footerBtn = document.getElementById('footerCartBtn');
        if (totalItems > 0) { footerBtn.style.display = 'block'; footerBtn.innerHTML = `View Cart (${totalItems}) &nbsp;&nbsp;&nbsp; ‚Çπ${totalPrice.toFixed(2)}`; } 
        else { footerBtn.style.display = 'none'; }
        let discountBanner = document.getElementById('discount-banner');
        if (totalPrice >= MINIMUM_ORDER_VALUE) {
            if (!discountBanner) { discountBanner = document.createElement('div'); discountBanner.id = 'discount-banner'; discountBanner.className = 'discount-banner'; discountBanner.textContent = 'üéâ FLAT 20% DISCOUNT UNLOCKED! üéâ'; document.querySelector('.menu-container').prepend(discountBanner); }
            discountBanner.style.display = 'block';
        } else { if (discountBanner) discountBanner.style.display = 'none'; }
    }
    
    function removeLastAddedItem(baseId) {
        for (let i = cart.length - 1; i >= 0; i--) { if (cart[i].baseId === baseId) { removeItem(cart[i].id); break; } }
    }

    function reopenOptionsFor(baseId) {
        const originalItem = findMenuItemById(baseId);
        if (originalItem && originalItem.options) { showOptionsModal(originalItem); } 
        else if (originalItem) { addItem(originalItem.id, originalItem.name, originalItem.price); }
    }

    function findMenuItemById(id) {
        for (const catId in menuData) {
            const category = menuData[catId];
            if (category.subCategories) {
                for (const subCatId in category.subCategories) { const found = category.subCategories[subCatId].items.find(item => item.id === id); if (found) return found; }
            } else { const found = category.items.find(item => item.id === id); if (found) return found; }
        }
        return null;
    }

    function showCheckoutForm() {
        if (cart.length === 0) return;
        const subtotal = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
        const discount = subtotal >= MINIMUM_ORDER_VALUE ? subtotal * DISCOUNT_PERCENTAGE : 0;
        const total = subtotal - discount;
        document.getElementById("subtotalPrice").textContent = `‚Çπ${subtotal.toFixed(2)}`;
        document.getElementById("discountAmount").textContent = `- ‚Çπ${discount.toFixed(2)}`;
        document.getElementById("checkoutTotal").textContent = `‚Çπ${total.toFixed(2)}`;
        const warningEl = document.getElementById("minOrderWarning"); const submitBtn = document.getElementById("submitBtn");
        if (subtotal < MINIMUM_ORDER_VALUE) { warningEl.textContent = `Minimum order is ‚Çπ${MINIMUM_ORDER_VALUE}`; warningEl.style.display = 'block'; submitBtn.disabled = true; } 
        else { warningEl.style.display = 'none'; submitBtn.disabled = false; }
        const cartItemsList = document.getElementById("cartItemsList"); cartItemsList.innerHTML = '';
        cart.forEach(item => { const listItem = document.createElement('li'); listItem.textContent = `${item.quantity} x ${item.name}`; cartItemsList.appendChild(listItem); });
        document.getElementById("checkoutModal").style.display = "flex";
    }

    function submitOrder() {
        const GOOGLE_SCRIPT_URL = "https://script.google.com/macros/s/AKfycbzg3NWQgCkAwmzKd4YbrxX0rPLf19as6SUJCv4hL9zwfykiY9KJ_n-t6vsT0DFs27nHYg/exec";
        const name = document.getElementById("customerName").value.trim();
        const phone = document.getElementById("customerPhone").value.trim();
        const address = document.getElementById("customerAddress").value.trim();
        if (!name || !phone || !address) { alert("Please fill in your name, phone number, and complete address."); return; }
        const subtotal = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
        if (subtotal < MINIMUM_ORDER_VALUE) { alert(`Minimum order is ‚Çπ${MINIMUM_ORDER_VALUE}.`); return; }
        const discount = subtotal >= MINIMUM_ORDER_VALUE ? subtotal * DISCOUNT_PERCENTAGE : 0;
        const finalTotal = subtotal - discount;
        const orderData = { name: `${name} (Delivery)`, phone, address, items: cart.map(item => ({ name: `${item.quantity} x ${item.name}` })), totalAmount: finalTotal, subtotal, discount, timestamp: new Date().toISOString() };
        const submitButton = document.getElementById('submitBtn');
        submitButton.disabled = true; submitButton.textContent = 'Placing Order...';
        fetch(GOOGLE_SCRIPT_URL, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(orderData) })
        .then(response => response.json())
        .then(data => {
            if (data.status !== 'success') { throw new Error(data.message || 'The script reported an error.'); }
            alert(`‚úÖ Thank you, ${name}! Your order has been placed successfully!`);
            cart = [];
            updateMainDisplay();
            document.getElementById('customerName').value = ''; document.getElementById('customerPhone').value = ''; document.getElementById('customerAddress').value = '';
            document.getElementById("checkoutModal").style.display = "none";
        })
        .catch(error => { console.error("Error placing order:", error); alert("‚ùå A critical error occurred. Could not place your order."); })
        .finally(() => { submitButton.disabled = false; submitButton.textContent = 'Place My Order'; });
    }

    document.addEventListener('DOMContentLoaded', () => {
        generateMenu();
        updateMainDisplay();
    });
</script>

</body>
</html>
