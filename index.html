<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>K's Tawa - In-House Ordering</title>
  <style>
    :root { --primary-color: #d35400; --green-color: #27ae60; --red-color: #e74c3c; }
    body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif; margin: 0; background: #fdfdfd; color: #333; padding-bottom: 90px; }
    header { background: var(--primary-color); color: white; padding: 15px; text-align: center; position: sticky; top: 0; z-index: 100; }
    header h1 { margin: 0; font-size: 1.4em; }
    footer { background: var(--primary-color); color: white; padding: 10px; text-align: center; position: fixed; bottom: 0; width: 100%; box-sizing: border-box; }
    .menu-container { padding: 20px; }
    h2 { font-size: 1.5em; color: var(--primary-color); }
    .item { display: flex; justify-content: space-between; align-items: center; padding: 12px 0; border-bottom: 1px solid #e0e0e0; }
    .item-name { font-weight: 500; font-size: 1.1em; flex-grow: 1; padding-right: 10px; }
    .controls { display: flex; align-items: center; gap: 10px; }
    .quantity { font-weight: bold; font-size: 1.2em; min-width: 20px; text-align: center; }
    .add-btn, .remove-btn { font-size: 1.5em; font-weight: bold; line-height: 1; padding: 6px 12px; border: none; border-radius: 6px; color: white; cursor: pointer; }
    .add-btn { background-color: var(--green-color); }
    .remove-btn { background-color: var(--red-color); }
    .footer-cart-btn { width: 95%; max-width: 450px; padding: 15px; font-size: 1.2em; background-color: var(--green-color); color: white; border: none; border-radius: 10px; cursor: pointer; }
    #checkoutModal { display: none; position: fixed; z-index: 1000; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); justify-content: center; align-items: center; }
    .modal-content { background: white; padding: 25px; border-radius: 12px; width: 90%; max-width: 400px; }
    .modal-content h2 { margin-top: 0; }
    .modal-content ul { list-style-type: none; padding: 10px 0; max-height: 200px; overflow-y: auto; border-top: 1px solid #eee; border-bottom: 1px solid #eee; margin: 15px 0;}
    .modal-content input { width: 100%; box-sizing: border-box; margin-bottom: 15px; padding: 14px; border: 1px solid #ccc; border-radius: 8px; font-size: 1.1em;}
    .modal-content button { width: 100%; padding: 14px; border-radius: 8px; border: none; font-size: 1.1em; font-weight: bold; color: white; cursor: pointer; }
    .place-order-btn { background-color: var(--green-color); margin-bottom: 10px; }
    .cancel-btn { background-color: var(--red-color); }
  </style>
</head>
<body>

<header><h1>K’s Tawa V/s Tandoor Junction</h1></header>

<div class="menu-container">
  
  <section id="tandoori-veg">
    <h2>🔥 Tandoori Starters (Veg)</h2>
    <div class="item"><span class="item-name">Achari Chaap (Half)</span><div class="controls"><button class="remove-btn" onclick="removeItem('acha-chap-h')">-</button><span class="quantity" id="qty-acha-chap-h">0</span><button class="add-btn" onclick="addItem('acha-chap-h', 'Achari Chaap (Half)', 110)">+</button></div></div>
    <div class="item"><span class="item-name">Achari Chaap (Full)</span><div class="controls"><button class="remove-btn" onclick="removeItem('acha-chap-f')">-</button><span class="quantity" id="qty-acha-chap-f">0</span><button class="add-btn" onclick="addItem('acha-chap-f', 'Achari Chaap (Full)', 180)">+</button></div></div>
    <div class="item"><span class="item-name">Lemon Chaap (Half)</span><div class="controls"><button class="remove-btn" onclick="removeItem('lemo-chap-h')">-</button><span class="quantity" id="qty-lemo-chap-h">0</span><button class="add-btn" onclick="addItem('lemo-chap-h', 'Lemon Chaap (Half)', 110)">+</button></div></div>
    <div class="item"><span class="item-name">Lemon Chaap (Full)</span><div class="controls"><button class="remove-btn" onclick="removeItem('lemo-chap-f')">-</button><span class="quantity" id="qty-lemo-chap-f">0</span><button class="add-btn" onclick="addItem('lemo-chap-f', 'Lemon Chaap (Full)', 180)">+</button></div></div>
    <div class="item"><span class="item-name">Chatpati Chaap (Half)</span><div class="controls"><button class="remove-btn" onclick="removeItem('chat-chap-h')">-</button><span class="quantity" id="qty-chat-chap-h">0</span><button class="add-btn" onclick="addItem('chat-chap-h', 'Chatpati Chaap (Half)', 110)">+</button></div></div>
    <div class="item"><span class="item-name">Chatpati Chaap (Full)</span><div class="controls"><button class="remove-btn" onclick="removeItem('chat-chap-f')">-</button><span class="quantity" id="qty-chat-chap-f">0</span><button class="add-btn" onclick="addItem('chat-chap-f', 'Chatpati Chaap (Full)', 180)">+</button></div></div>
    <div class="item"><span class="item-name">Malai Chaap (Half)</span><div class="controls"><button class="remove-btn" onclick="removeItem('mala-chap-h')">-</button><span class="quantity" id="qty-mala-chap-h">0</span><button class="add-btn" onclick="addItem('mala-chap-h', 'Malai Chaap (Half)', 110)">+</button></div></div>
    <div class="item"><span class="item-name">Malai Chaap (Full)</span><div class="controls"><button class="remove-btn" onclick="removeItem('mala-chap-f')">-</button><span class="quantity" id="qty-mala-chap-f">0</span><button class="add-btn" onclick="addItem('mala-chap-f', 'Malai Chaap (Full)', 180)">+</button></div></div>
    <div class="item"><span class="item-name">Paneer Tikka (Half)</span><div class="controls"><button class="remove-btn" onclick="removeItem('pane-tikk-h')">-</button><span class="quantity" id="qty-pane-tikk-h">0</span><button class="add-btn" onclick="addItem('pane-tikk-h', 'Paneer Tikka (Half)', 120)">+</button></div></div>
    <div class="item"><span class="item-name">Paneer Tikka (Full)</span><div class="controls"><button class="remove-btn" onclick="removeItem('pane-tikk-f')">-</button><span class="quantity" id="qty-pane-tikk-f">0</span><button class="add-btn" onclick="addItem('pane-tikk-f', 'Paneer Tikka (Full)', 200)">+</button></div></div>
    <div class="item"><span class="item-name">Paneer Malai Tikka (Half)</span><div class="controls"><button class="remove-btn" onclick="removeItem('panemala-tikk-h')">-</button><span class="quantity" id="qty-panemala-tikk-h">0</span><button class="add-btn" onclick="addItem('panemala-tikk-h', 'Paneer Malai Tikka (Half)', 140)">+</button></div></div>
    <div class="item"><span class="item-name">Paneer Malai Tikka (Full)</span><div class="controls"><button class="remove-btn" onclick="removeItem('panemala-tikk-f')">-</button><span class="quantity" id="qty-panemala-tikk-f">0</span><button class="add-btn" onclick="addItem('panemala-tikk-f', 'Paneer Malai Tikka (Full)', 240)">+</button></div></div>
    <div class="item"><span class="item-name">Paneer Achari Tikka (Half)</span><div class="controls"><button class="remove-btn" onclick="removeItem('paneacha-tikk-h')">-</button><span class="quantity" id="qty-paneacha-tikk-h">0</span><button class="add-btn" onclick="addItem('paneacha-tikk-h', 'Paneer Achari Tikka (Half)', 120)">+</button></div></div>
    <div class="item"><span class="item-name">Paneer Achari Tikka (Full)</span><div class="controls"><button class="remove-btn" onclick="removeItem('paneacha-tikk-f')">-</button><span class="quantity" id="qty-paneacha-tikk-f">0</span><button class="add-btn" onclick="addItem('paneacha-tikk-f', 'Paneer Achari Tikka (Full)', 200)">+</button></div></div>
    <div class="item"><span class="item-name">Peri Peri Soya Chaap (Half)</span><div class="controls"><button class="remove-btn" onclick="removeItem('peri-soya-h')">-</button><span class="quantity" id="qty-peri-soya-h">0</span><button class="add-btn" onclick="addItem('peri-soya-h', 'Peri Peri Soya Chaap (Half)', 110)">+</button></div></div>
    <div class="item"><span class="item-name">Peri Peri Soya Chaap (Full)</span><div class="controls"><button class="remove-btn" onclick="removeItem('peri-soya-f')">-</button><span class="quantity" id="qty-peri-soya-f">0</span><button class="add-btn" onclick="addItem('peri-soya-f', 'Peri Peri Soya Chaap (Full)', 180)">+</button></div></div>
    <div class="item"><span class="item-name">Peri Peri Paneer Tikka (Half)</span><div class="controls"><button class="remove-btn" onclick="removeItem('peri-pane-h')">-</button><span class="quantity" id="qty-peri-pane-h">0</span><button class="add-btn" onclick="addItem('peri-pane-h', 'Peri Peri Paneer Tikka (Half)', 120)">+</button></div></div>
    <div class="item"><span class="item-name">Peri Peri Paneer Tikka (Full)</span><div class="controls"><button class="remove-btn" onclick="removeItem('peri-pane-f')">-</button><span class="quantity" id="qty-peri-pane-f">0</span><button class="add-btn" onclick="addItem('peri-pane-f', 'Peri Peri Paneer Tikka (Full)', 200)">+</button></div></div>
    <div class="item"><span class="item-name">Mushroom Tikka (Half)</span><div class="controls"><button class="remove-btn" onclick="removeItem('mush-tikk-h')">-</button><span class="quantity" id="qty-mush-tikk-h">0</span><button class="add-btn" onclick="addItem('mush-tikk-h', 'Mushroom Tikka (Half)', 120)">+</button></div></div>
    <div class="item"><span class="item-name">Mushroom Tikka (Full)</span><div class="controls"><button class="remove-btn" onclick="removeItem('mush-tikk-f')">-</button><span class="quantity" id="qty-mush-tikk-f">0</span><button class="add-btn" onclick="addItem('mush-tikk-f', 'Mushroom Tikka (Full)', 200)">+</button></div></div>
    <div class="item"><span class="item-name">Afghani Tandoori Chaap (Half)</span><div class="controls"><button class="remove-btn" onclick="removeItem('afgh-chap-h')">-</button><span class="quantity" id="qty-afgh-chap-h">0</span><button class="add-btn" onclick="addItem('afgh-chap-h', 'Afghani Tandoori Chaap (Half)', 140)">+</button></div></div>
    <div class="item"><span class="item-name">Afghani Tandoori Chaap (Full)</span><div class="controls"><button class="remove-btn" onclick="removeItem('afgh-chap-f')">-</button><span class="quantity" id="qty-afgh-chap-f">0</span><button class="add-btn" onclick="addItem('afgh-chap-f', 'Afghani Tandoori Chaap (Full)', 220)">+</button></div></div>
  </section>

  <section id="tandoori-nonveg">
    <h2>🔥 Tandoori Starters (Non-Veg)</h2>
    <div class="item"><span class="item-name">Bhatti Murg (4 pcs)</span><div class="controls"><button class="remove-btn" onclick="removeItem('bhat-murg-4')">-</button><span class="quantity" id="qty-bhat-murg-4">0</span><button class="add-btn" onclick="addItem('bhat-murg-4', 'Bhatti Murg (4 pcs)', 260)">+</button></div></div>
    <div class="item"><span class="item-name">Bhatti Murg (8 pcs)</span><div class="controls"><button class="remove-btn" onclick="removeItem('bhat-murg-8')">-</button><span class="quantity" id="qty-bhat-murg-8">0</span><button class="add-btn" onclick="addItem('bhat-murg-8', 'Bhatti Murg (8 pcs)', 480)">+</button></div></div>
    <div class="item"><span class="item-name">Tandoori Chicken (4 pcs)</span><div class="controls"><button class="remove-btn" onclick="removeItem('tand-chic-4')">-</button><span class="quantity" id="qty-tand-chic-4">0</span><button class="add-btn" onclick="addItem('tand-chic-4', 'Tandoori Chicken (4 pcs)', 260)">+</button></div></div>
    <div class="item"><span class="item-name">Tandoori Chicken (8 pcs)</span><div class="controls"><button class="remove-btn" onclick="removeItem('tand-chic-8')">-</button><span class="quantity" id="qty-tand-chic-8">0</span><button class="add-btn" onclick="addItem('tand-chic-8', 'Tandoori Chicken (8 pcs)', 480)">+</button></div></div>
    <div class="item"><span class="item-name">Chicken Tikka (8 pcs)</span><div class="controls"><button class="remove-btn" onclick="removeItem('chic-tikk-8')">-</button><span class="quantity" id="qty-chic-tikk-8">0</span><button class="add-btn" onclick="addItem('chic-tikk-8', 'Chicken Tikka (8 pcs)', 300)">+</button></div></div>
    <div class="item"><span class="item-name">Chicken Seekh (2 pcs)</span><div class="controls"><button class="remove-btn" onclick="removeItem('chic-seek-2')">-</button><span class="quantity" id="qty-chic-seek-2">0</span><button class="add-btn" onclick="addItem('chic-seek-2', 'Chicken Seekh (2 pcs)', 180)">+</button></div></div>
  </section>
  
  <section id="paneer-momos"><h2>🥟 Paneer Momos (10 pcs)</h2>
    <div class="item"><span class="item-name">Paneer Kurkure Momos</span><div class="controls"><button class="remove-btn" onclick="removeItem('pane-kurk-momo')">-</button><span class="quantity" id="qty-pane-kurk-momo">0</span><button class="add-btn" onclick="addItem('pane-kurk-momo', 'Paneer Kurkure Momos', 140)">+</button></div></div>
    <div class="item"><span class="item-name">Paneer Steam Momos</span><div class="controls"><button class="remove-btn" onclick="removeItem('pane-stea-momo')">-</button><span class="quantity" id="qty-pane-stea-momo">0</span><button class="add-btn" onclick="addItem('pane-stea-momo', 'Paneer Steam Momos', 120)">+</button></div></div>
    <div class="item"><span class="item-name">Paneer Fried Momos</span><div class="controls"><button class="remove-btn" onclick="removeItem('pane-frie-momo')">-</button><span class="quantity" id="qty-pane-frie-momo">0</span><button class="add-btn" onclick="addItem('pane-frie-momo', 'Paneer Fried Momos', 140)">+</button></div></div>
    <div class="item"><span class="item-name">Paneer Afghani Momos</span><div class="controls"><button class="remove-btn" onclick="removeItem('pane-afgh-momo')">-</button><span class="quantity" id="qty-pane-afgh-momo">0</span><button class="add-btn" onclick="addItem('pane-afgh-momo', 'Paneer Afghani Momos', 180)">+</button></div></div>
    <div class="item"><span class="item-name">Paneer Malai Momos</span><div class="controls"><button class="remove-btn" onclick="removeItem('pane-mala-momo')">-</button><span class="quantity" id="qty-pane-mala-momo">0</span><button class="add-btn" onclick="addItem('pane-mala-momo', 'Paneer Malai Momos', 180)">+</button></div></div>
    <div class="item"><span class="item-name">Paneer Gravy Momos</span><div class="controls"><button class="remove-btn" onclick="removeItem('pane-grav-momo')">-</button><span class="quantity" id="qty-pane-grav-momo">0</span><button class="add-btn" onclick="addItem('pane-grav-momo', 'Paneer Gravy Momos', 200)">+</button></div></div>
    <div class="item"><span class="item-name">Paneer Chilli Momos</span><div class="controls"><button class="remove-btn" onclick="removeItem('pane-chil-momo')">-</button><span class="quantity" id="qty-pane-chil-momo">0</span><button class="add-btn" onclick="addItem('pane-chil-momo', 'Paneer Chilli Momos', 220)">+</button></div></div>
  </section>
  
  <section id="veg-momos"><h2>🥟 Veg Momos (10 pcs)</h2>
    <div class="item"><span class="item-name">Veg Kurkure Momos</span><div class="controls"><button class="remove-btn" onclick="removeItem('veg-kurk-momo')">-</button><span class="quantity" id="qty-veg-kurk-momo">0</span><button class="add-btn" onclick="addItem('veg-kurk-momo', 'Veg Kurkure Momos', 110)">+</button></div></div>
    <div class="item"><span class="item-name">Veg Steam Momos</span><div class="controls"><button class="remove-btn" onclick="removeItem('veg-stea-momo')">-</button><span class="quantity" id="qty-veg-stea-momo">0</span><button class="add-btn" onclick="addItem('veg-stea-momo', 'Veg Steam Momos', 80)">+</button></div></div>
    <div class="item"><span class="item-name">Veg Tandoori Momos</span><div class="controls"><button class="remove-btn" onclick="removeItem('veg-tand-momo')">-</button><span class="quantity" id="qty-veg-tand-momo">0</span><button class="add-btn" onclick="addItem('veg-tand-momo', 'Veg Tandoori Momos', 100)">+</button></div></div>
    <div class="item"><span class="item-name">Veg Fried Momos</span><div class="controls"><button class="remove-btn" onclick="removeItem('veg-frie-momo')">-</button><span class="quantity" id="qty-veg-frie-momo">0</span><button class="add-btn" onclick="addItem('veg-frie-momo', 'Veg Fried Momos', 110)">+</button></div></div>
    <div class="item"><span class="item-name">Veg Afghani Momos</span><div class="controls"><button class="remove-btn" onclick="removeItem('veg-afgh-momo')">-</button><span class="quantity" id="qty-veg-afgh-momo">0</span><button class="add-btn" onclick="addItem('veg-afgh-momo', 'Veg Afghani Momos', 120)">+</button></div></div>
    <div class="item"><span class="item-name">Veg Malai Momos</span><div class="controls"><button class="remove-btn" onclick="removeItem('veg-mala-momo')">-</button><span class="quantity" id="qty-veg-mala-momo">0</span><button class="add-btn" onclick="addItem('veg-mala-momo', 'Veg Malai Momos', 120)">+</button></div></div>
    <div class="item"><span class="item-name">Veg Gravy Momos</span><div class="controls"><button class="remove-btn" onclick="removeItem('veg-grav-momo')">-</button><span class="quantity" id="qty-veg-grav-momo">0</span><button class="add-btn" onclick="addItem('veg-grav-momo', 'Veg Gravy Momos', 130)">+</button></div></div>
    <div class="item"><span class="item-name">Veg Chilli Momos</span><div class="controls"><button class="remove-btn" onclick="removeItem('veg-chil-momo')">-</button><span class="quantity" id="qty-veg-chil-momo">0</span><button class="add-btn" onclick="addItem('veg-chil-momo', 'Veg Chilli Momos', 150)">+</button></div></div>
  </section>

</div>

<footer>
  <button class="footer-cart-btn" onclick="showCheckoutForm()">
    View Cart (<span id="cartItemCount">0</span>) | Total: ₹<span id="cartTotalPrice">0.00</span>
  </button>
</footer>

<div id="checkoutModal">
  <div class="modal-content">
    <h2>Enter Customer Details</h2>
    <input type="text" id="customerName" placeholder="Full Name or Table No." required />
    <input type="tel" id="customerPhone" placeholder="Phone Number (Optional)" />
    <h4>Order Summary:</h4>
    <ul id="cartItemsList"></ul>
    <h4>Total: ₹<span id="checkoutTotal">0.00</span></h4>
    <div>
      <button onclick="submitOrder()" id="submitBtn" class="place-order-btn">Place Order</button>
      <button onclick="document.getElementById('checkoutModal').style.display='none'" class="cancel-btn">Cancel</button>
    </div>
  </div>
</div>

<script>
    let cart = [];
    
    function addItem(id, name, price) {
        const existingItem = cart.find(item => item.id === id);
        if (existingItem) { existingItem.quantity++; } 
        else { cart.push({ id, name, price, quantity: 1 }); }
        updateDisplays();
    }

    function removeItem(id) {
        const itemIndex = cart.findIndex(item => item.id === id);
        if (itemIndex > -1) {
            const item = cart[itemIndex];
            item.quantity--;
            if (item.quantity === 0) { cart.splice(itemIndex, 1); }
        }
        updateDisplays();
    }

    function updateDisplays() {
        document.querySelectorAll('.quantity').forEach(qtyElement => {
            const id = qtyElement.id.replace('qty-', '');
            const cartItem = cart.find(item => item.id === id);
            qtyElement.textContent = cartItem ? cartItem.quantity : '0';
        });
        const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
        const totalPrice = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
        document.getElementById("cartItemCount").innerText = totalItems;
        document.getElementById("cartTotalPrice").innerText = totalPrice.toFixed(2);
    }
    
    function showCheckoutForm() {
        if (cart.length === 0) { alert("Cart is empty!"); return; }
        const cartItemsList = document.getElementById("cartItemsList");
        cartItemsList.innerHTML = '';
        let total = 0;
        cart.forEach(item => {
            const listItem = document.createElement('li');
            listItem.textContent = `${item.quantity} x ${item.name} - ₹${(item.price * item.quantity).toFixed(2)}`;
            cartItemsList.appendChild(listItem);
            total += item.price * item.quantity;
        });
        document.getElementById("checkoutTotal").innerText = total.toFixed(2);
        document.getElementById("checkoutModal").style.display = "flex";
    }

    function submitOrder() {
        // IMPORTANT: Replace this with your ORIGINAL in-house Google Script URL that does NOT require an address
        const GOOGLE_SCRIPT_URL = "https://script.google.com/macros/s/AKfycbzvvtmV_2QpOzcOhvBoMCQBXQ3knIWppsVAeyGL8B1at3F9fToMlFePNJU85UD2DCRWHQ/exec";
        
        const name = document.getElementById("customerName").value.trim();
        const phone = document.getElementById("customerPhone").value.trim();
        if (!name) { alert("Please enter a Name or Table Number."); return; }
        
        const itemsForBackend = cart.map(item => ({ name: `${item.quantity} x ${item.name}` }));
        const orderData = { 
            name: `${name} (In-House)`,
            phone, 
            items: itemsForBackend, 
            totalAmount: cart.reduce((sum, item) => sum + (item.price * item.quantity), 0), 
            timestamp: new Date().toISOString() 
        };
        
        const submitButton = document.getElementById('submitBtn');
        submitButton.disabled = true;
        submitButton.textContent = 'Placing Order...';
        
        fetch(GOOGLE_SCRIPT_URL, {
            method: 'POST',
            mode: 'no-cors', // In-house might need no-cors depending on the script version
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(orderData)
        })
        .then(() => {
            alert(`✅ Order for ${name} placed successfully!`);
            cart = [];
            updateDisplays();
            document.getElementById('customerName').value = '';
            document.getElementById('customerPhone').value = '';
            document.getElementById("checkoutModal").style.display = "none";
        })
        .catch(error => {
            console.error("Error placing order:", error);
            alert("❌ Could not place order.");
        })
        .finally(() => {
            submitButton.disabled = false;
            submitButton.textContent = 'Place Order';
        });
    }

    document.addEventListener('DOMContentLoaded', updateDisplays);
</script>

</body>
</html>
